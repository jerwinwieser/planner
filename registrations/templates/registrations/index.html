{% extends 'registrations/base_section.html' %}

{% load crispy_forms_tags %}

{% block title %}registrations - index{% endblock title %}

{% block content %}

<h2>Login:</h2>
{{ current_user }}

<h2>Users:</h2>
<ul>
	{% for user in users %}
	<li>{{ user }} ({{ user|title }})</li>
	{% endfor users %}
</ul>

<h2>Persons:</h2>
<ul>
	{% for person in persons %}
	<li>{{ person.name }} | {{ person.duration }} | <a href="{% url 'form_edit' person.id %}">Edit</a> | <a href="{% url 'form_delete' person.id %}">Delete</a> - ({{ person.created_by }})</li>
	{% endfor persons %}
</ul>

<h2>Persons by User:</h2>
<ul>
	{% for person_by_user in persons_by_user %}
	<li>{{ person_by_user.name }} | {{ person_by_user.duration }} | <a href="{% url 'form_edit' person_by_user.id %}">Edit</a> | <a href="{% url 'form_delete' person_by_user.id %}">Delete</a> - ({{ person_by_user.created_by }})</li>
	{% endfor persons_by_user %}
</ul>

<h2>Data Table:</h2>
<table id="datatable_example">
	<thead>
		<tr>
			<th>Name</th>
			<th>Nationality</th>
			<th>Age</th>
			<th>Duration</th>
			<th>Interaction</th>
			<th>Looks</th>
			<th>Close</th>
			<th>Reply</th>
			<th>Lay</th>
			<th>Created at</th>
			<th>Created by</th>
		</tr>
	</thead>
	<tbody>
		{% for person in persons %}
		<tr>
			<td>{{ person.name }}</td>
			<td>{{ person.nationality }}</td>
			<td>{{ person.person_age }}</td>
			<td>{{ person.duration }}</td>
			<td>{{ person.interaction }}</td>
			<td>{{ person.looks }}</td>
			<td>{{ person.close }}</td>
			<td>{{ person.reply }}</td>
			<td>{{ person.lay }}</td>
			<td>{{ person.created_at }}</td>
			<td>{{ person.created_by }}</td>
		</tr>
		{% endfor persons %}
	</tbody>
</table>

<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>

<script>
$(document).ready(function() {
    $('#datatable_example').DataTable();
})
</script>

{% endblock content %}
